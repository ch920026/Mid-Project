{"ast":null,"code":"import _slicedToArray from \"/Users/Hsi/Desktop/WebProg2019/mid/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Hsi/Desktop/WebProg2019/mid/src/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDom from \"react-dom\";\nimport \"./index.css\";\nimport webSocket from \"socket.io-client\";\n\nconst Main = () => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        ws = _useState2[0],\n        setWs = _useState2[1];\n\n  const connectWebSocket = () => {\n    //開啟\n    setWs(webSocket(\"http://localhost:3000\"));\n  };\n\n  useEffect(() => {\n    if (ws) {\n      //連線成功在 console 中打印訊息\n      console.log(\"success connect!\"); //設定監聽\n\n      initWebSocket();\n    }\n\n    setWs(webSocket(\"http://localhost:3000\"));\n    initWebSocket();\n  }, [ws]);\n\n  const initWebSocket = () => {\n    //對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n    ws.on(\"getMessage\", message => {\n      console.log(message);\n    });\n  };\n\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    ws.emit(\"getMessage\", \"只回傳給發送訊息的 client\");\n  };\n\n  const add = e => {\n    var fileUrl = document.getElementById(\"url\");\n    var fileName = document.getElementById(\"filename\");\n    console.log(e.key);\n\n    if (e.key === \"Enter\" && e.shiftKey == false) {\n      // Emit to server input\n      console.log(\"launch\");\n      ws.emit(\"file\", {\n        filename: fileName.value,\n        url: fileUrl.value\n      });\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"\\u9023\\u7DDA\",\n    onClick: connectWebSocket,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"\\u9001\\u51FA\\u8A0A\\u606F\",\n    onClick: sendMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"clear\",\n    className: \"btn btn-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Clear\"), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"filename\",\n    className: \"form-control\",\n    placeholder: \"Enter file name...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"url\",\n    className: \"form-control\",\n    placeholder: \"Paste file url...\",\n    onKeyPress: add,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(\"iframe\", {\n    src: \"https://www.tutorialspoint.com/mongodb/mongodb_tutorial.pdf\",\n    id: \"showPdf\",\n    frameBorder: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: \"chat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"messages\",\n    className: \"card-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    className: \"form-control\",\n    placeholder: \"Enter name...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"textarea\", {\n    id: \"textarea\",\n    className: \"form-control\",\n    placeholder: \"Enter message...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  })))));\n};\n\nReactDom.render(React.createElement(Main, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 107\n  },\n  __self: this\n}), document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/Hsi/Desktop/WebProg2019/mid/src/index.js"],"names":["React","useState","useEffect","ReactDom","webSocket","Main","ws","setWs","connectWebSocket","console","log","initWebSocket","on","message","sendMessage","emit","add","e","fileUrl","document","getElementById","fileName","key","shiftKey","filename","value","url","render"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ReactDom from \"react-dom\";\nimport \"./index.css\";\nimport webSocket from \"socket.io-client\";\n\nconst Main = () => {\n  const [ws, setWs] = useState(null);\n\n  const connectWebSocket = () => {\n    //開啟\n    setWs(webSocket(\"http://localhost:3000\"));\n  };\n\n  useEffect(() => {\n    if (ws) {\n      //連線成功在 console 中打印訊息\n      console.log(\"success connect!\");\n      //設定監聽\n      initWebSocket();\n    }\n    setWs(webSocket(\"http://localhost:3000\"));\n    initWebSocket();\n  }, [ws]);\n\n  const initWebSocket = () => {\n    //對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n    ws.on(\"getMessage\", message => {\n      console.log(message);\n    });\n  };\n\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    ws.emit(\"getMessage\", \"只回傳給發送訊息的 client\");\n  };\n\n  const add = e => {\n    var fileUrl = document.getElementById(\"url\");\n    var fileName = document.getElementById(\"filename\");\n    console.log(e.key);\n\n    if (e.key === \"Enter\" && e.shiftKey == false) {\n      // Emit to server input\n      console.log(\"launch\");\n      ws.emit(\"file\", {\n        filename: fileName.value,\n        url: fileUrl.value\n      });\n    }\n  };\n\n  return (\n    <div>\n      <input type=\"button\" value=\"連線\" onClick={connectWebSocket} />\n      <input type=\"button\" value=\"送出訊息\" onClick={sendMessage} />\n      <div className=\"container\">\n        <button id=\"clear\" className=\"btn btn-danger\">\n          Clear\n        </button>\n        <div className=\"row\">\n          <div className=\"Add\">\n            <input\n              type=\"text\"\n              id=\"filename\"\n              className=\"form-control\"\n              placeholder=\"Enter file name...\"\n            />\n            <input\n              type=\"text\"\n              id=\"url\"\n              className=\"form-control\"\n              placeholder=\"Paste file url...\"\n              onKeyPress={add}\n            />\n\n            <iframe\n              src=\"https://www.tutorialspoint.com/mongodb/mongodb_tutorial.pdf\"\n              id=\"showPdf\"\n              frameBorder=\"0\"\n            />\n          </div>\n          <div id=\"chat\">\n            <div className=\"card\">\n              <div id=\"messages\" className=\"card-block\" />\n            </div>\n            <br />\n            <input\n              type=\"text\"\n              id=\"username\"\n              className=\"form-control\"\n              placeholder=\"Enter name...\"\n            />\n            <br />\n            <textarea\n              id=\"textarea\"\n              className=\"form-control\"\n              placeholder=\"Enter message...\"\n            />\n            <div id=\"status\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nReactDom.render(<Main />, document.getElementById(\"root\"));\n"]},"metadata":{},"sourceType":"module"}
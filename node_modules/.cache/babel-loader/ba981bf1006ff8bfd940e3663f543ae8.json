{"ast":null,"code":"var _jsxFileName = \"/Users/Hsi/Desktop/WebProg2019/mid/src/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport './index.css';\nimport webSocket from 'socket.io-client';\n\nconst Main = () => {\n  //const [ws,setWs] = useState(null)\n  const ws = io.connect(\"http://localhost:3000\");\n  /*\n  const connectWebSocket = () => {\n      //開啟\n      setWs(webSocket('http://localhost:3000'))\n  }\n   useEffect(()=>{\n      if(ws){\n          //連線成功在 console 中打印訊息\n          console.log('success connect!')\n          //設定監聽\n          initWebSocket()\n      }\n  },[ws])\n  */\n\n  const initWebSocket = () => {\n    //對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n    ws.on('getMessage', message => {\n      console.log(message);\n    });\n  };\n\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    ws.emit('getMessage', '只回傳給發送訊息的 client');\n  };\n\n  const add = e => {\n    var fileUrl = document.getElementById(\"url\");\n    var fileName = document.getElementById(\"filename\");\n    console.log(e.key);\n\n    if (e.key === \"Enter\" && e.shiftKey == false) {\n      // Emit to server input\n      console.log(\"launch\");\n      ws.emit('file', {\n        filename: fileName.value,\n        url: fileUrl.value\n      });\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"\\u9023\\u7DDA\",\n    onClick: connectWebSocket,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"\\u9001\\u51FA\\u8A0A\\u606F\",\n    onClick: sendMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"clear\",\n    className: \"btn btn-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Clear\"), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"filename\",\n    className: \"form-control\",\n    placeholder: \"Enter file name...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"url\",\n    className: \"form-control\",\n    placeholder: \"Paste file url...\",\n    onKeyPress: add,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(\"iframe\", {\n    src: \"https://www.tutorialspoint.com/mongodb/mongodb_tutorial.pdf\",\n    id: \"showPdf\",\n    frameBorder: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: \"chat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"messages\",\n    className: \"card-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    className: \"form-control\",\n    placeholder: \"Enter name...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"textarea\", {\n    id: \"textarea\",\n    className: \"form-control\",\n    placeholder: \"Enter message...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })))));\n};\n\nReactDom.render(React.createElement(Main, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 101\n  },\n  __self: this\n}), document.getElementById('root'));","map":{"version":3,"sources":["/Users/Hsi/Desktop/WebProg2019/mid/src/index.js"],"names":["React","useState","useEffect","ReactDom","webSocket","Main","ws","io","connect","initWebSocket","on","message","console","log","sendMessage","emit","add","e","fileUrl","document","getElementById","fileName","key","shiftKey","filename","value","url","connectWebSocket","render"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ReactDom from 'react-dom'\nimport './index.css';\nimport webSocket from 'socket.io-client'\n\n\nconst Main = () => {\n    //const [ws,setWs] = useState(null)\n    const ws = io.connect(\"http://localhost:3000\");\n    \n    /*\n    const connectWebSocket = () => {\n        //開啟\n        setWs(webSocket('http://localhost:3000'))\n    }\n\n    useEffect(()=>{\n        if(ws){\n            //連線成功在 console 中打印訊息\n            console.log('success connect!')\n            //設定監聽\n            initWebSocket()\n        }\n    },[ws])\n*/\n\n    const initWebSocket = () => {\n        //對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n        ws.on('getMessage', message => {\n            console.log(message)\n        })\n    }\n\n    const sendMessage = () => {\n        //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n        ws.emit('getMessage', '只回傳給發送訊息的 client')\n    }\n\n    const add = e =>{\n        var fileUrl=document.getElementById(\"url\");\n        var fileName=document.getElementById(\"filename\");\n        console.log(e.key)\n\n            if (e.key === \"Enter\"&& e.shiftKey == false) {\n                // Emit to server input\n                console.log(\"launch\")\n                ws.emit('file', {\n                    filename: fileName.value,\n                    url: fileUrl.value\n                });\n            }\n            \n        }\n\n    \n    \n\n    return(\n        <div>\n            <input type='button' value='連線' onClick={connectWebSocket} />\n            <input type='button' value='送出訊息' onClick={sendMessage} />\n            <div className=\"container\">\n                <button id=\"clear\" className=\"btn btn-danger\">Clear</button>\n            <div className=\"row\">\n                        \n                    <div className=\"Add\">\n                        <input type=\"text\" id=\"filename\" className=\"form-control\" placeholder=\"Enter file name...\"/>\n                        <input type=\"text\" id=\"url\" className=\"form-control\" placeholder=\"Paste file url...\" onKeyPress={add}/>\n\n                        <iframe src=\"https://www.tutorialspoint.com/mongodb/mongodb_tutorial.pdf\" id=\"showPdf\" frameBorder=\"0\"></iframe>\n                    </div>\n                    <div id=\"chat\">\n                        <div className=\"card\">\n                            <div\n                                id=\"messages\"\n                                className=\"card-block\"\n                            ></div>\n                        </div>\n                        <br />\n                        <input\n                            type=\"text\"\n                            id=\"username\"\n                            className=\"form-control\"\n                            placeholder=\"Enter name...\"\n                        />\n                        <br />\n                        <textarea\n                            id=\"textarea\"\n                            className=\"form-control\"\n                            placeholder=\"Enter message...\"\n                        ></textarea>\n                        <div id=\"status\"></div>\n                    </div>\n                    \n            </div>\n        </div>\n        </div>\n    )\n}\n\nReactDom.render(<Main />, document.getElementById('root'))"]},"metadata":{},"sourceType":"module"}